Failed to load trends

Error: Unexpected token '<', "<!doctype "... is not valid JSON\
Failed to load trends

Error: Unexpected token '<', "<!doctype "... is not valid JSON

---

[Request interrupted by user]

---

[background] Git available - will extract git metadata
2026-02-25T15:12:30.299Z [INFO] [pagerank] PageRank cache invalidated
[background] Embedding 286/286...
[background] Code index failed: Found field not in schema: metadata at row 0
c

---

http://localhost:3838/api/risk-analysis?limit=20
нужно пофиксить эту ручку

---

<task-notification>
<task-id>bcc4249</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bcc4249.output</output-file>
<status>completed</status>
<summary>Background command "Запуск API сервера" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bcc4249.output

---

<task-notification>
<task-id>bfee0b2</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bfee0b2.output</output-file>
<status>completed</status>
<summary>Background command "Запуск API сервера из корня" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bfee0b2.output

---

http://localhost:3838/api/risk-analysis?limit=20
<!doctype html>
<html lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>yep-mem</title>
        <script type="module" crossorigin src="/assets/index-DNtx5eZj.js"></script>
        <link rel="stylesheet" crossorigin href="/assets/index-Cwh2i32c.css">
    </head>
    <body class="bg-zinc-950 text-zinc-100">
        <div id="root"></div>
    </body>
</html>
\
➜  yep git:(main) ✗ bun run build && yep gui

---

<task-notification>
<task-id>b3f5148</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/b3f5148.output</output-file>
<status>completed</status>
<summary>Background command "Запуск API сервера" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/b3f5148.output

---

[Request interrupted by user for tool use]

---

➜  yep git:(main) ✗ bun run build && yep gui
$ turbo build
• turbo 2.8.10
• Packages in scope: @yep/config, @yep/db, @yep/env, desktop, server, yep-mem
• Running build in 6 packages
• Remote caching disabled
┌─ desktop#build > cache hit (outputs already on disk), replaying logs 2fa27439ffafc914 

$ tsc -b && vite build && bun run build:gui
vite v6.4.1 building for production...
✓ 2858 modules transformed.
dist/index.html                                            
  0.42 kB │ gzip:   0.29 kB
dist/assets/inter-vietnamese-wght-normal-CBcvBZtf.woff2    
 10.25 kB
dist/assets/inter-greek-ext-wght-normal-DlzME5K_.woff2     
 11.23 kB
dist/assets/inter-cyrillic-wght-normal-DqGufNeO.woff2      
 18.75 kB
dist/assets/inter-greek-wght-normal-CkhJZR-_.woff2         
 19.00 kB
dist/assets/inter-cyrillic-ext-wght-normal-BOeWTOD4.woff2  
 25.96 kB
dist/assets/inter-latin-wght-normal-Dx4kXJAl.woff2         
 48.26 kB
dist/assets/inter-latin-ext-wght-normal-DO1Apj_S.woff2     
 85.07 kB
dist/asses                             
 39.88 kB │ gzip:   7.48 kB
dist/assets/index-DQBLuju8.js                              
976.92 kB │ gzip: 288.64 kB

(!) Some chunks are larger than 500 kB after minification. 
Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve ch
unking: https://rollupjs.org/configuration-options/#output-
manualchunks
- Adjust chunk size limit for this warning via build.chunkS
izeWarningLimit.
✓ built in 4.83s
$ VITE_API_BASE='' vite build --outDir ../tui/gui-dist --em
ptyOutDir
vite v6.4.1 building for production...
✓ 2858 modules transformed.
../tui/gui-dist/index.html                                 
             0.42 kB │ gzip:   0.29 kB
../tui/gui-dist/assets/inter-vietnamese-wght-normal-CBcvBZt
f.woff2     10.25 kB
../tui/gui-dist/assets/inter-greek-ext-wght-normal-DlzME5K_
.woff2      11.23 kB
../tui/gui-dist/assets/inter-cyrillic-wght-normal-DqGufNeO.
woff2       18.75 kB
../tui/gui-dist/assets/inter-greemal-CkhJZR-_.wof
f2          19.00 kB
../tui/gui-dist/assets/inter-cyrillic-ext-wght-normal-BOeWT
OD4.woff2   25.96 kB
../tui/gui-dist/assets/inter-latin-wght-normal-Dx4kXJAl.wof
f2          48.26 kB
../tui/gui-dist/assets/inter-latin-ext-wght-normal-DO1Apj_S
.woff2      85.07 kB
../tui/gui-dist/assets/index-Cwh2i32c.css                  
            39.88 kB │ gzip:   7.48 kB
../tui/gui-dist/assets/index-DNtx5eZj.js                   
           976.83 kB │ gzip: 288.59 kB

(!) Some chunks are larger than 500 kB after minification. 
Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve ch
unking: https://rollupjs.org/configuration-options/#output-
manualchunks
- Adjust chunk size limit for this warning via build.chunkS
izeWarningLimit.
✓ built in 3.28s
└─ desktop#build ──
┌─ server#build > cache hit (outputs already on disk), replaying logs b558227c8c731424 

$ tsdown
ℹ tsdown v0.16.8 powered by rolldown v1.0.0-beta.52
g: /Users/balkhaev/mycode/yep/apps/serv
er/tsdown.config.ts
ℹ entry: src/index.ts
ℹ tsconfig: tsconfig.json
ℹ Build start
ℹ dist/index.mjs  4.41 kB │ gzip: 1.76 kB
ℹ 1 files, total: 4.41 kB
✔ Build complete in 18ms
└─ server#build ──
┌─ yep-mem#build > cache hit (outputs already on disk), replaying logs 86a80b93bc277fae 

$ tsc -b
└─ yep-mem#build ──

 Tasks:    3 successful, 3 total
Cached:    3 cached, 3 total
  Time:    81ms >>> FULL TURBO

Starting yep GUI on http://localhost:3838
GUI running at http://localhost:3838
[background] Code index is stale, re-indexing...
[background] Indexing code symbols...
[background] Found 163 code files, 30 to index
[background] Git available - will extract git metadata
[background] Embedding 287/287...
[background] Code index failed: Found field not in schema: metadata at row 0

---

<task-notification>
<task-id>b77c30b</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/b77c30b.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/b77c30b.output

---

<task-notification>
<task-id>bd7544a</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bd7544a.output</output-file>
<status>completed</status>
<summary>Background command "Повторный запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bd7544a.output

---

все еще я делаю bun run build && yep gui и получаю <!doctype html>
<html lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>yep-mem</title>
        <script type="module" crossorigin src="/assets/index-DNtx5eZj.js"></script>
        <link rel="stylesheet" crossorigin href="/assets/index-Cwh2i32c.css">
    </head>
    <body class="bg-zinc-950 text-zinc-100">
        <div id="root"></div>
    </body>
</html>
с ручки http://localhost:3838/api/risk-analysis?limit=20

---

<task-notification>
<task-id>b5211d3</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/b5211d3.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/b5211d3.output

---

<task-notification>
<task-id>bfad4b2</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bfad4b2.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bfad4b2.output

---

теперь куча http://localhost:3838/status и других ручек отдает <!doctype html>
<html lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>yep-mem</title>
        <script type="module" crossorigin src="/assets/index-DNtx5eZj.js"></script>
        <link rel="stylesheet" crossorigin href="/assets/index-Cwh2i32c.css">
    </head>
    <body class="bg-zinc-950 text-zinc-100">
        <div id="root"></div>
    </body>
</html>

---

<task-notification>
<task-id>bd2a34b</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bd2a34b.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bd2a34b.output

---

http://localhost:3838/code/insights и другие все еще, сделай нормальное api путь

---

1

---

а запросы все еще http://localhost:3838/code/stats а они отдают html

---

<task-notification>
<task-id>b8d8926</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/b8d8926.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/b8d8926.output

---

installHook.js:1 TypeError: Cannot read properties of undefined (reading 'length')
    at sme (index-BNFdBs5N.js:231:46440)\
    if (e.snapshots.length === 0)

---

<task-notification>
<task-id>b08cf5e</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/b08cf5e.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/b08cf5e.output
<task-notification>
<task-id>bc98e15</task-id>
<output-file>/tmp/claude/-Users-balkhaev-mycode-yep/tasks/bc98e15.output</output-file>
<status>completed</status>
<summary>Background command "Запуск GUI" completed (exit code 0).</summary>
</task-notification>
Read the output file to retrieve the result: /tmp/claude/-Users-balkhaev-mycode-yep/tasks/bc98e15.output