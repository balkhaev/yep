#!/usr/bin/env bash
set -euo pipefail

SOURCE="$0"
while [ -L "$SOURCE" ]; do
  DIR="$(cd "$(dirname "$SOURCE")" && pwd)"
  SOURCE="$(readlink "$SOURCE")"
  [[ "$SOURCE" != /* ]] && SOURCE="$DIR/$SOURCE"
done
REPO_ROOT="$(cd "$(dirname "$SOURCE")/.." && pwd)"

ENTRY="$REPO_ROOT/apps/tui/src/index.tsx"

if command -v bun &>/dev/null; then
  exec bun "$ENTRY" "$@"
elif command -v npx &>/dev/null; then
  exec npx tsx "$ENTRY" "$@"
else
  echo "Error: bun or node (npx) is required to run yep" >&2
  exit 1
fi
